<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>東京跨年之旅 2026 | Tokyo New Year Adventure</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        body { 
            background-color: #fef4f4; 
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        @keyframes progress {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .animate-progress {
            animation: progress 2s ease-in-out infinite;
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icon = ({ name, className = "w-4 h-4" }) => {
            const icons = {
                plane: <path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"/>,
                calendar: (
                    <g fill="none" stroke="currentColor" strokeWidth="2">
                        <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                        <path d="M16 2v4M8 2v4M3 10h18"/>
                    </g>
                ),
                briefcase: (
                    <g fill="none" stroke="currentColor" strokeWidth="2">
                        <rect width="20" height="14" x="2" y="7" rx="2" ry="2"/>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                    </g>
                ),
                mapPin: <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>,
                train: <path d="M7 15h10M15 13H9m-2 4 1-1h8l1 1M5 3v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3M5 13h14M5 7h14M15 3v5H9V3h6Z"/>,
                languages: <path d="m5 8 6 6M4 14l6-6 2-3M2 5h12M7 2h1M22 22l-5-10-5 10M14 18h6"/>,
                phone: <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.81 12.81 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        const TRANSLATIONS = {
            zh: {
                appName: "東京跨年之旅",
                subtitle: "TOKYO NEW YEAR ADVENTURE",
                schedule: "行程",
                tools: "工具箱",
                weatherCity: "東京",
                weatherFeel: "體感",
                weatherHumidity: "濕度",
                mapBtn: "GOOGLE 地圖導航",
                transportTitle: "建議交通路線",
                flightTitle: "航班備忘錄",
                emergencyTitle: "緊急求助電話",
                emergencyPolice: "日本警察 (110)",
                emergencyAmbulance: "救護車 (119)",
                tags: { transport: "交通", entry: "入境", stay: "住宿", countdown: "倒數", shopping: "購物", anime: "動漫", rest: "休息", hotel: "飯店", move: "搬家", sightseeing: "景點", final: "最後衝刺", culture: "文化" }
            },
            en: {
                appName: "Tokyo New Year",
                subtitle: "TOKYO NEW YEAR ADVENTURE",
                schedule: "Schedule",
                tools: "Tools",
                weatherCity: "Tokyo",
                weatherFeel: "Feels like",
                weatherHumidity: "Humidity",
                mapBtn: "GOOGLE MAPS NAV",
                transportTitle: "Transport Routes",
                flightTitle: "Flight Reminders",
                emergencyTitle: "Emergency Contacts",
                emergencyPolice: "Police (110)",
                emergencyAmbulance: "Ambulance (119)",
                tags: { transport: "Transport", entry: "Entry", stay: "Stay", countdown: "Countdown", shopping: "Shopping", anime: "Anime", rest: "Rest", hotel: "Hotel", move: "Move", sightseeing: "Sights", final: "Last Call", culture: "Culture" }
            }
        };

        const TransportRoute = ({ from, to, steps, t }) => (
            <div className="mt-4 p-4 bg-blue-50/50 border border-blue-100 rounded-2xl">
                <div className="flex items-center gap-2 mb-3 text-[10px] font-black text-blue-600 uppercase tracking-widest">
                    <Icon name="train" className="w-3.5 h-3.5" /> {t.transportTitle}
                </div>
                <div className="flex flex-col gap-2">
                    <div className="flex items-center gap-2">
                        <div className="w-2 h-2 rounded-full bg-blue-400"></div>
                        <span className="text-xs font-bold text-slate-700">{from}</span>
                    </div>
                    {steps.map((step, idx) => (
                        <div key={idx} className="ml-[3px] border-l-2 border-dashed border-blue-200 pl-4 py-1 flex flex-col">
                            <span className="text-[11px] font-bold text-slate-600 leading-tight">{step.line}</span>
                            <span className="text-[9px] text-blue-400 font-medium italic">{step.note}</span>
                        </div>
                    ))}
                    <div className="flex items-center gap-2">
                        <div className="w-2 h-2 rounded-full bg-blue-600"></div>
                        <span className="text-xs font-bold text-blue-800">{to}</span>
                    </div>
                </div>
            </div>
        );

        const App = () => {
            const [lang, setLang] = useState(() => localStorage.getItem('tokyo_app_lang') || 'zh');
            const [activeTab, setActiveTab] = useState('schedule');
            const [selectedDay, setSelectedDay] = useState(1);
            const [showSplash, setShowSplash] = useState(true);
            const t = TRANSLATIONS[lang];

            useEffect(() => {
                const timer = setTimeout(() => setShowSplash(false), 1500);
                return () => clearTimeout(timer);
            }, []);

            const TRAVEL_DATA = useMemo(() => {
                const isZh = lang === 'zh';
                return {
                    days: [
                        { day: 1, date: "31/12", 
                          title: isZh ? "抵達成田與跨年倒數" : "Arrival & Countdown", 
                          schedule: [
                            { time: "17:10", place: "Narita T2", tags: [t.tags.entry], desc: isZh ? "辦理入境與拿行李 (約 60-90 分鐘)。" : "Clear immigration & luggage (60-90 mins)." },
                            { time: "19:00", place: "Amand Hotel Tokyo", tags: [t.tags.hotel, t.tags.stay], desc: isZh ? "入住水道橋飯店並在巨蛋城晚餐。" : "Check in at Suidobashi, dinner at Tokyo Dome City.",
                              transport: { from: "NRT T2", to: "Suidobashi", steps: [
                                { line: "Keisei Skyliner", note: isZh ? "往日暮里 (40分)" : "To Nippori (40m)" },
                                { line: "JR Yamanote Inner Loop", note: isZh ? "轉往秋葉原" : "To Akihabara" },
                                { line: "JR Chuo-Sobu Line", note: isZh ? "抵達水道橋" : "To Suidobashi" }
                              ]}
                            },
                            { time: "23:00", place: "Zojoji Temple (増上寺)", tags: [t.tags.countdown], desc: isZh ? "跨年倒數與新年參拜。" : "New Year countdown and Hatsumode visit." }
                          ]
                        },
                        { day: 2, date: "01/01", 
                          title: isZh ? "秋葉原動漫聖地巡禮" : "Akihabara Day", 
                          schedule: [
                            { time: "11:00", place: "Radio Kaikan (ラジオ会館)", tags: [t.tags.anime, t.tags.shopping], desc: isZh ? "Mint Card: 6階, Book-Off: 1 Chome-6-4 Kanda Sakumacho, Chiyoda City, Tokyo 101-0025日本, Mandarake Complex: 3 Chome-11-12 Sotokanda, Chiyoda City, Tokyo 101-0021日本" : "Mint Card: 6階, Book-Off: 1 Chome-6-4 Kanda Sakumacho, Chiyoda City, Tokyo 101-0025日本, Mandarake Complex: 3 Chome-11-12 Sotokanda, Chiyoda City, Tokyo 101-0021日本" },
                            { time: "15:00", place: "Surugaya (駿河屋)", tags: [t.tags.anime], desc: isZh ? "尋找二手動漫模型與週邊。" : "Search for second-hand anime figures." }
                          ]
                        },
                        { day: 3, date: "02/01", 
                          title: isZh ? "搬家至大塚與池袋探路" : "Move to Otsuka",
                          schedule: [
                            { time: "10:00", place: "Minami-Otsuka Hotel", tags: [t.tags.move, t.tags.hotel], desc: isZh ? "從水道橋搬到大塚飯店寄行李。" : "Move luggage from Suidobashi to Otsuka.",
                              transport: { from: "Suidobashi", to: "Otsuka", steps: [
                                { line: "JR Chuo-Sobu Line", note: "To Shinjuku" },
                                { line: "JR Yamanote Line", note: "To Otsuka" }
                              ]}
                            },
                            { time: "14:00", place: "Ikebukuro (池袋)", tags: [t.tags.sightseeing], desc: isZh ? "池袋探路與 Sunshine City 預熱。" : "Explore Ikebukuro and Sunshine City." }
                          ]
                        },
                        { day: 4, date: "03/01", 
                          title: isZh ? "中野、阿左谷與淺草" : "Nakano & Asakusa", 
                          schedule: [
                            { time: "11:00", place: "Nakano Broadway", tags: [t.tags.anime, t.tags.shopping], desc: isZh ? "深度逛 Mandarake 總部與模型店。" : "Deep dive into Mandarake headquarters." },
                            { time: "17:00", place: "Senso-ji Temple (淺草寺)", tags: [t.tags.culture], desc: isZh ? "淺草寺參拜與 ROX 逛街。" : "Senso-ji visit and Asakusa ROX shopping." }
                          ]
                        },
                        { day: 5, date: "04/01", 
                          title: isZh ? "原宿、澀谷與新宿夜景" : "Shibuya & Shinjuku", 
                          schedule: [
                            { time: "12:00", place: "Shibuya Crossing", tags: [t.tags.sightseeing], desc: isZh ? "逛 Mandarake 澀谷店與八公像。" : "Visit Mandarake Shibuya and Hachiko statue." },
                            { time: "17:30", place: "Tokyo Metropolitan Government Building", tags: [t.tags.sightseeing], desc: isZh ? "45 樓免費展望室看夜景。" : "Free night view from 45F observatory." }
                          ]
                        },
                        { day: 6, date: "05/01", 
                          title: isZh ? "神田神保町書香之旅" : "Jinbocho Book Town", 
                          schedule: [
                            { time: "11:00", place: "Jinbocho (神保町)", tags: [t.tags.culture, t.tags.shopping], desc: isZh ? "世界最大舊書街，逛 AT Wonder 模型店。" : "World's largest used book district, visit AT Wonder.",
                              transport: { from: "Otsuka", to: "Jinbocho", steps: [
                                { line: "JR Yamanote (Inner Loop)", note: "To Kanda (4 stops)" },
                                { line: "Walking/Subway", note: "To Book Town" }
                              ]}
                            }
                          ]
                        },
                        { day: 7, date: "06/01", 
                          title: isZh ? "都電荒川線＋池袋掃貨" : "Arakawa Tram Day", 
                          schedule: [
                            { time: "09:00", place: "Toden Arakawa Line", tags: [t.tags.transport, t.tags.sightseeing], desc: isZh ? "買 400円 一日券，玩鬼子母神前、庚申塚。" : "400yen 1-day pass, visit Kishibojinmae & Koshinzuka." },
                            { time: "14:00", place: "Sunshine City Ikebukuro", tags: [t.tags.final, t.tags.shopping], desc: isZh ? "重點：Mandarake Lala, BookOff 最後補貨。" : "Final haul: Mandarake Lala & BookOff." }
                          ]
                        },
                        { day: 8, date: "07/01", 
                          title: isZh ? "最後購物與回程" : "Final Call & Return", 
                          schedule: [
                            { time: "11:00", place: "Otsuka Hotel Checkout", tags: [t.tags.rest], desc: isZh ? "退房寄放行李，進行最後補買。" : "Checkout, store luggage, last minute shopping." },
                            { time: "15:00", place: "Narita Airport T2", tags: [t.tags.transport], desc: isZh ? "搭 Skyliner 前往機場，18:20 飛機。" : "Skyliner to NRT, flight at 18:20.",
                              transport: { from: "Nippori", to: "Narita T2", steps: [
                                { line: "Keisei Skyliner", note: isZh ? "準時抵達機場" : "Arrive at airport on time" }
                              ]}
                            }
                          ]
                        }
                    ]
                };
            }, [lang, t]);

            const currentDayData = TRAVEL_DATA.days.find(d => d.day === selectedDay) || TRAVEL_DATA.days[0];

            return (
                <div className="max-w-md mx-auto min-h-screen relative pb-32">
                    {/* Splash Screen */}
                    <div style={{
                        position: 'fixed', inset: 0, background: '#192f60', zIndex: 9999,
                        display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center',
                        transition: 'opacity 0.5s ease', opacity: showSplash ? 1 : 0, pointerEvents: 'none'
                    }}>
                        <div className="w-24 h-24 bg-white/10 rounded-3xl flex items-center justify-center mb-4">
                            <Icon name="plane" className="text-white w-12 h-12" />
                        </div>
                        <h1 className="text-white font-black tracking-widest text-xl">TOKYO 2026</h1>
                        <div className="mt-8 w-12 h-1 bg-white/20 rounded-full overflow-hidden relative">
                            <div className="absolute inset-0 bg-white w-full animate-progress"></div>
                        </div>
                    </div>

                    {/* Header */}
                    <div className="absolute top-4 right-4 z-50">
                        <button 
                            onClick={() => {
                                const newLang = lang === 'zh' ? 'en' : 'zh';
                                setLang(newLang);
                                localStorage.setItem('tokyo_app_lang', newLang);
                            }}
                            className="flex items-center gap-2 bg-white/80 backdrop-blur-md border border-white/50 px-3 py-2 rounded-2xl shadow-sm text-[#192f60] text-xs font-black active:scale-95 transition-transform"
                        >
                            <Icon name="languages" className="w-3.5 h-3.5" />
                            {lang === 'zh' ? 'ENGLISH' : '繁體中文'}
                        </button>
                    </div>

                    {activeTab === 'schedule' ? (
                        <div className="px-4 pt-16">
                            {/* Weather Card */}
                            <div className="bg-white/80 backdrop-blur-md rounded-3xl p-5 shadow-lg border border-white/50 mb-4 fade-in">
                                <div className="flex items-center gap-4">
                                    <div className="bg-blue-50 p-2 rounded-2xl">
                                        <img src="https://openweathermap.org/img/wn/01d@2x.png" className="w-12 h-12" alt="weather" />
                                    </div>
                                    <div>
                                        <div className="flex items-baseline gap-1">
                                            <span className="text-3xl font-black text-[#192f60]">8°</span>
                                            <span className="text-xs text-slate-400 font-bold">{t.weatherCity}</span>
                                        </div>
                                        <div className="text-[10px] text-slate-500 font-bold uppercase tracking-wider">
                                            {t.weatherFeel} 5°C • {t.weatherHumidity} 45%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            {/* Day Selector */}
                            <div className="flex overflow-x-auto no-scrollbar py-4 gap-3 sticky top-0 bg-[#fef4f4]/80 backdrop-blur-sm z-20 -mx-4 px-4">
                                {TRAVEL_DATA.days.map(d => (
                                    <button
                                        key={d.day}
                                        onClick={() => setSelectedDay(d.day)}
                                        className={`flex-shrink-0 w-14 h-18 py-3 rounded-2xl flex flex-col items-center justify-center transition-all ${
                                            selectedDay === d.day ? 'bg-[#192f60] text-white shadow-lg scale-105' : 'bg-white text-slate-400'
                                        }`}
                                    >
                                        <span className="text-[9px] font-bold mb-1 opacity-70">{d.date}</span>
                                        <span className="text-lg font-black">D{d.day}</span>
                                    </button>
                                ))}
                            </div>

                            {/* Schedule Content */}
                            <div key={selectedDay} className="fade-in">
                                <div className="mt-4 bg-white/70 backdrop-blur-md rounded-3xl p-6 shadow-sm border border-white/50 mb-6">
                                    <h2 className="text-2xl font-bold text-[#192f60]">{currentDayData.title}</h2>
                                    <p className="text-slate-400 text-[10px] mt-1 tracking-widest uppercase font-bold">{t.subtitle}</p>
                                </div>

                                <div className="space-y-4">
                                    {currentDayData.schedule.map((item, idx) => (
                                        <div key={idx} className="bg-white rounded-[28px] shadow-sm border border-[#f5e6e6] p-6">
                                            <div className="flex justify-between items-start mb-4">
                                                <div className="bg-[#192f60] text-white text-[10px] font-black px-3 py-1 rounded-full">{item.time}</div>
                                                <div className="flex gap-1">
                                                    {item.tags.map((tag, i) => (
                                                        <span key={i} className="text-[9px] bg-slate-100 text-slate-500 px-2 py-1 rounded-md font-bold">#{tag}</span>
                                                    ))}
                                                </div>
                                            </div>
                                            <h3 className="text-lg font-bold text-[#192f60] mb-2">{item.place}</h3>
                                            <p className="text-xs text-slate-600 leading-relaxed">{item.desc}</p>
                                            
                                            {item.transport && (
                                                <TransportRoute from={item.transport.from} to={item.transport.to} steps={item.transport.steps} t={t} />
                                            )}
                                            
                                            <button 
                                                onClick={() => window.open(`https://www.google.com/maps/search/${encodeURIComponent(item.place + " Tokyo")}`, '_blank')}
                                                className="w-full mt-4 py-3 bg-[#fef4f4] rounded-xl text-[#192f60] text-[10px] font-black flex items-center justify-center gap-2 active:bg-pink-50"
                                            >
                                                <Icon name="mapPin" className="w-3.5 h-3.5" /> {t.mapBtn}
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div className="px-6 pt-20 space-y-8 fade-in">
                            <h1 className="text-3xl font-bold text-[#192f60]">{t.tools}</h1>
                            
                            <div className="bg-white/80 p-6 rounded-3xl shadow-sm border border-white/50">
                                <h2 className="flex items-center gap-2 font-bold text-[#192f60] mb-4 text-xs uppercase tracking-widest">
                                    <Icon name="plane" className="w-4 h-4" /> {t.flightTitle}
                                </h2>
                                <div className="space-y-3">
                                    <div className="flex justify-between items-center bg-slate-50 p-4 rounded-2xl">
                                        <span className="text-xs font-bold text-slate-500">Day 1 Out</span>
                                        <span className="text-sm font-black text-[#192f60]">HB2320 (12:00 → 17:10)</span>
                                    </div>
                                    <div className="flex justify-between items-center bg-slate-50 p-4 rounded-2xl">
                                        <span className="text-xs font-bold text-slate-500">Day 8 Back</span>
                                        <span className="text-sm font-black text-[#192f60]">HB323 (18:20 → 22:50)</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-red-50 p-6 rounded-3xl border border-red-100">
                                <h2 className="text-red-600 font-bold mb-4 text-xs flex items-center gap-2 tracking-widest uppercase">
                                    <Icon name="phone" className="w-4 h-4" /> {t.emergencyTitle}
                                </h2>
                                <div className="space-y-4">
                                    <div className="flex justify-between items-center py-2 border-b border-red-100/50">
                                        <span className="text-xs text-red-800 font-bold">{t.emergencyPolice}</span>
                                        <span className="font-black text-red-600">110</span>
                                    </div>
                                    <div className="flex justify-between items-center py-2">
                                        <span className="text-xs text-red-800 font-bold">{t.emergencyAmbulance}</span>
                                        <span className="font-black text-red-600">119</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Bottom Nav */}
                    <nav className="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-slate-100 pb-8 pt-4 z-30">
                        <div className="max-w-md mx-auto flex justify-around">
                            <button 
                                onClick={() => setActiveTab('schedule')} 
                                className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'schedule' ? 'text-[#192f60]' : 'text-slate-300'}`}
                            >
                                <Icon name="calendar" className="w-6 h-6" />
                                <span className="text-[9px] font-black uppercase">{t.schedule}</span>
                            </button>
                            <button 
                                onClick={() => setActiveTab('tools')} 
                                className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'tools' ? 'text-[#192f60]' : 'text-slate-300'}`}
                            >
                                <Icon name="briefcase" className="w-6 h-6" />
                                <span className="text-[9px] font-black uppercase">{t.tools}</span>
                            </button>
                        </div>
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
